<script src="../../../node_modules/chart.js/src/chart.js"></script> <!-- Chart.js -->
<script  type="application/javascript">
  $('input[type="file"]').change(function(e){
      var fileName = e.target.files[0].name;
      console.log(fileName);
      $('#theFileLabel').html(fileName);
  });
</script>

<div class="container" id="file-uploader">
  <div class="row">
      <form>
        <div class="col-sm form-group">
          <label class="custom-file-label" for="theFile" id="theFileLabel">Choose a brushfile</label> 
          <input type="file" class="custom-file-input" id="theFile" aria-describedby="fileUpload"
          (change)="fileChanged($event)" (change)="uploadFile()" (change)="uploadFile()" ><br>
        </div>
      </form>
  </div>
</div>

<div class="container" *ngIf="brushes">
  <div class="row">
      <div class="col" id="table-container">
        <h3>Brush data</h3>
        <table class="table table-hover">
          <thead>
              <tr>
                <th>Brush</th>
                <th *ngIf="brushes[0].ch1>=0">Channel 1</th>
                <th *ngIf="brushes[0].ch2>=0">Channel 2</th>
                <th *ngIf="brushes[0].ch3>=0">Channel 3</th>
                <th *ngIf="brushes[0].ch4>=0">Channel 4</th>
                <th *ngIf="brushes[0].ch5>=0">Channel 5</th>
                <th>Description</th>
              </tr>
          </thead>
          <tbody>
              <tr *ngFor="let brush of brushes" id="{{brush.brushId}}">
                <td (mousedown)="addData(brush.brushId); markRow(brush.brushId)">{{brush.brushId}}</td>
                <td *ngIf="brush.ch1>=0"><input type="text" id="{{brush.brushId}}ch1" (keypress)="numberOnly($event)" (mousedown)="addData(brush.brushId); markRow(brush.brushId)" value="{{brush.ch1}}"></td>
                <td *ngIf="brush.ch2>=0"><input type="text" id="{{brush.brushId}}ch2" (keypress)="numberOnly($event)" (mousedown)="addData(brush.brushId); markRow(brush.brushId)" value="{{brush.ch2}}"></td>
                <td *ngIf="brush.ch3>=0"><input type="text" id="{{brush.brushId}}ch3" (keypress)="numberOnly($event)" (mousedown)="addData(brush.brushId); markRow(brush.brushId)" value="{{brush.ch3}}"></td>
                <td *ngIf="brush.ch4>=0"><input type="text" id="{{brush.brushId}}ch4" (keypress)="numberOnly($event)" (mousedown)="addData(brush.brushId); markRow(brush.brushId)" value="{{brush.ch4}}"></td>
                <td *ngIf="brush.ch5>=0"><input type="text" id="{{brush.brushId}}ch5" (keypress)="numberOnly($event)" (mousedown)="addData(brush.brushId); markRow(brush.brushId)" value="{{brush.ch5}}"></td>
                <td><span contenteditable="true"><input type="text" id="{{brush.brushId}}desc" class="desc" (mousedown)="addData(brush.brushId); markRow(brush.brushId)" value="{{brush.desc}}"></span></td>
              </tr>
          </tbody>
        </table>
      </div>
    <div class="col" id="charts">
      <h3>Graphical representation</h3>
      <canvas baseChart
        [data]="barChartData"
        [labels]="barChartLabels"
        [options]="barChartOptions"
        [legend]="barChartLegend"
        [chartType]="barChartType"
        (chartHover)="chartHovered($event)"
        (chartClick)="chartClicked($event)">
      </canvas>
    </div>
  </div>
</div>

