<!-- Where is the chart.js script init? Not needed? -->

<!-- Show table and graph only if a file has been uploaded -->
<div class="container" *ngIf="brushes.length>0"> 
  <div class="row">
      <div class="col" id="table-container">
        <h3>Data</h3>
        <table class="table table-hover">
          <thead>
              <tr>
                <th>Brush ID</th>
                <th *ngIf="brushes[0].ch1>=0">Channel 1</th>
                <th *ngIf="brushes[0].ch2>=0">Channel 2</th>
                <th *ngIf="brushes[0].ch3>=0">Channel 3</th>
                <th *ngIf="brushes[0].ch4>=0">Channel 4</th>
                <th *ngIf="brushes[0].ch5>=0">Channel 5</th>
                <th>Description</th>
              </tr>
          </thead>
          <tbody>
              <tr *ngFor="let brush of brushes" id="{{brush.brushId}}">
                <td (mousedown)="addData(brush.brushId); markRow(brush.brushId)">{{brush.brushId}}</td>
                <td *ngIf="brush.ch1>=0"><input type="text" id="{{brush.brushId}}ch1" value="{{brush.ch1}}"
                  (keyup)="numberOnly($event); updateBrushes(brush.brushId, 'ch1')" 
                  (mousedown)="addData(brush.brushId); markRow(brush.brushId)"></td>
                <td *ngIf="brush.ch2>=0"><input type="text" id="{{brush.brushId}}ch2" value="{{brush.ch2}}"
                  (keyup)="numberOnly($event); updateBrushes(brush.brushId, 'ch2')" 
                  (mousedown)="addData(brush.brushId); markRow(brush.brushId)"></td>
                <td *ngIf="brush.ch3>=0"><input type="text" id="{{brush.brushId}}ch3" value="{{brush.ch3}}" 
                  (keyup)="numberOnly($event); updateBrushes(brush.brushId, 'ch3')" 
                  (mousedown)="addData(brush.brushId); markRow(brush.brushId)"></td>
                <td *ngIf="brush.ch4>=0"><input type="text" id="{{brush.brushId}}ch4" value="{{brush.ch4}}"
                  (keyup)="numberOnly($event); updateBrushes(brush.brushId, 'ch4')" 
                  (mousedown)="addData(brush.brushId); markRow(brush.brushId)"></td>
                <td *ngIf="brush.ch5>=0"><input type="text" id="{{brush.brushId}}ch5" value="{{brush.ch5}}"
                  (keyup)="numberOnly($event); updateBrushes(brush.brushId, 'ch5')" 
                  (mousedown)="addData(brush.brushId); markRow(brush.brushId)"></td>
                <td><span contenteditable="true"><input type="text" id="{{brush.brushId}}desc" class="desc" value="{{brush.desc}}"
                  (keyup)="updateBrushes(brush.brushId, 'desc')"
                  (mousedown)="addData(brush.brushId); markRow(brush.brushId)"></span></td>
              </tr>
          </tbody>
        </table>
      </div>
      <div class="col" id="charts">
        <!--<app-brush-graph [currentBrushId]="currentBrushId"></app-brush-graph>-->
        <h3>Graph</h3>
         <!-- Display block if data is available, display none if not -->
        <canvas baseChart [ngClass]="isDataAvailable ? 'd-block' : 'd-none'" 
                [data]="barChartData"
                [labels]="barChartLabels"
                [options]="barChartOptions"
                [legend]="barChartLegend"
                [chartType]="barChartType">
        </canvas> 
        <!-- Add a helper text is no data is selected -->
        <p class="text-center font-weight-bold" *ngIf="isDataAvailable==false">Select a brush to show graph</p>
      </div>
  </div>
</div>

